<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
<html lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì•„ì´ë”§(IDID) ë…¸ë˜ ì†ŒíŠ¸</title>

<script type="text/javascript">
/*********************************************************
 * ì •ë ¬í•  í•­ëª©(ë…¸ë˜ ë¦¬ìŠ¤íŠ¸)
 *********************************************************/
var namMember = new Array(
  "<br>ì œë©‹ëŒ€ë¡œ ì°¬ë€í•˜ê²Œ</br>",
  "<br>SLOW TIDE</br>",
  "<br>STEP IT UP</br>",
  "<br>ImPerfect</br>",
  "<br>So G.oo.D (ë„¤ê°€ ë¯¸ì¹˜ë„ë¡ ì¢‹ì•„)</br>",
  "<br>STICKY BOMB</br>",
  "<br>ê¿ˆì„ ê¿°ëš«ëŠ” ìˆœê°„(é£›å¿…æ²–å¤©)</br>",
  "<br>ê½ƒí”¼ìš¸ CROWN</br>",
  "<br>PUSH BACK</br>",
  "<br>Heaven Smiles</br>"
);

/*********************************************************
 * ì†ŒíŠ¸ ë¡œì§(ì›í˜• ìœ ì§€)
 *********************************************************/
var lstMember = new Array();
var parent = new Array();
var equal = new Array();
var rec = new Array();
var cmp1, cmp2;
var head1, head2;
var nrec;

var totalSize;
var finishSize;
var finishFlag;

function initList(){
  var n = 0;
  var mid;
  var i;

  // ì •ë ¬í•  ë°°ì—´
  lstMember[n] = new Array();
  for (i=0; i<namMember.length; i++) {
    lstMember[n][i] = i;
  }
  parent[n] = -1;
  totalSize = 0;
  n++;

  for (i=0; i<lstMember.length; i++) {
    if (lstMember[i].length >= 2) {
      mid = Math.ceil(lstMember[i].length / 2);

      lstMember[n] = new Array();
      lstMember[n] = lstMember[i].slice(0, mid);
      totalSize += lstMember[n].length;
      parent[n] = i;
      n++;

      lstMember[n] = new Array();
      lstMember[n] = lstMember[i].slice(mid, lstMember[i].length);
      totalSize += lstMember[n].length;
      parent[n] = i;
      n++;
    }
  }

  // ì €ì¥ìš© ë°°ì—´
  for (i=0; i<namMember.length; i++) rec[i] = 0;
  nrec = 0;

  // ë™ì (ë¬´ìŠ¹ë¶€) ì €ì¥ ë¦¬ìŠ¤íŠ¸
  for (i=0; i<=namMember.length; i++) equal[i] = -1;

  cmp1 = lstMember.length - 2;
  cmp2 = lstMember.length - 1;
  head1 = 0;
  head2 = 0;
  finishSize = 0;
  finishFlag = 0;

  // ê²°ê³¼/ì¹´ë“œ ì´ˆê¸°í™”
  var tc = document.getElementById("topCardWrap");
  if (tc) tc.innerHTML = "";
  var rf = document.getElementById("resultField");
  if (rf) rf.innerHTML = "";

  // ë¹„êµ í™”ë©´ ë‹¤ì‹œ í‘œì‹œ(ì•ˆì •ì : display ì œì–´)
  var cw = document.getElementById("compareWrap");
  if (cw) cw.style.display = "";

  // ë²„íŠ¼ í…ìŠ¤íŠ¸ ì›ë³µ
  var pr = document.getElementById("progress");
  if (pr) pr.innerHTML = "ì§„í–‰ë„ 0%";

  updateProgress();
}

function updateProgress(){
  var percent = 0;
  if (totalSize > 0) percent = Math.floor(finishSize * 100 / totalSize);
  var el = document.getElementById("progress");
  if (el) el.innerHTML = "ì§„í–‰ë„ " + percent + "%";
}

// âœ… ì„ íƒ ë˜í¼: ë¯¸ì„¸ ì§„ë™ + ì‹¤ì œ ì„ íƒ ì²˜ë¦¬
function choose(flag){
  if (finishFlag != 0) return;

  // ë¯¸ì„¸ ì§„ë™ (ì§€ì› ê¸°ê¸°ì—ì„œë§Œ)
  try {
    if (navigator && navigator.vibrate) navigator.vibrate(18);
  } catch(e) {}

  sortList(flag);
}

// flag: -1(ì™¼ìª½ ì„ íƒ), 0(ë™ì ), 1(ì˜¤ë¥¸ìª½ ì„ íƒ)
function sortList(flag){
  var i;

  // recì— ì €ì¥
  if (flag < 0) {
    rec[nrec] = lstMember[cmp1][head1];
    head1++;
    nrec++;
    finishSize++;

    while (equal[rec[nrec-1]] != -1) {
      rec[nrec] = lstMember[cmp1][head1];
      head1++;
      nrec++;
      finishSize++;
    }
  }
  else if (flag > 0) {
    rec[nrec] = lstMember[cmp2][head2];
    head2++;
    nrec++;
    finishSize++;

    while (equal[rec[nrec-1]] != -1) {
      rec[nrec] = lstMember[cmp2][head2];
      head2++;
      nrec++;
      finishSize++;
    }
  }
  else {
    // (ë™ì  UIëŠ” ì—†ì§€ë§Œ, ë¡œì§ ìœ ì§€)
    rec[nrec] = lstMember[cmp1][head1];
    head1++;
    nrec++;
    finishSize++;

    while (equal[rec[nrec-1]] != -1) {
      rec[nrec] = lstMember[cmp1][head1];
      head1++;
      nrec++;
      finishSize++;
    }

    equal[rec[nrec-1]] = lstMember[cmp2][head2];

    rec[nrec] = lstMember[cmp2][head2];
    head2++;
    nrec++;
    finishSize++;

    while (equal[rec[nrec-1]] != -1) {
      rec[nrec] = lstMember[cmp2][head2];
      head2++;
      nrec++;
      finishSize++;
    }
  }

  // í•œìª½ ë¦¬ìŠ¤íŠ¸ë¥¼ ë‹¤ ì½ì—ˆì„ ë•Œ ë‚¨ì€ ê²ƒ ë³µì‚¬
  if (head1 < lstMember[cmp1].length && head2 == lstMember[cmp2].length) {
    while (head1 < lstMember[cmp1].length) {
      rec[nrec] = lstMember[cmp1][head1];
      head1++;
      nrec++;
      finishSize++;
    }
  }
  else if (head1 == lstMember[cmp1].length && head2 < lstMember[cmp2].length) {
    while (head2 < lstMember[cmp2].length) {
      rec[nrec] = lstMember[cmp2][head2];
      head2++;
      nrec++;
      finishSize++;
    }
  }

  // ë¶€ëª¨ ë¦¬ìŠ¤íŠ¸ ê°±ì‹ 
  if (head1 == lstMember[cmp1].length && head2 == lstMember[cmp2].length) {
    for (i=0; i<lstMember[cmp1].length + lstMember[cmp2].length; i++) {
      lstMember[parent[cmp1]][i] = rec[i];
    }
    lstMember.pop();
    lstMember.pop();
    cmp1 = cmp1 - 2;
    cmp2 = cmp2 - 2;
    head1 = 0;
    head2 = 0;

    // ìƒˆ ë¹„êµ ì „ì— rec ì´ˆê¸°í™”
    if (head1 == 0 && head2 == 0) {
      for (i=0; i<namMember.length; i++) rec[i] = 0;
      nrec = 0;
    }
  }

  updateProgress();

  // ëë‚¬ìœ¼ë©´ ê²°ê³¼ í‘œì‹œ
  if (cmp1 < 0) {
    var pr = document.getElementById("progress");
    if (pr) pr.innerHTML = "ì •ë ¬ ì™„ë£Œ!";
    showResult();
    finishFlag = 1;
  } else {
    showImage();
  }
}

// ê²°ê³¼ í‘œì‹œ + 1ìœ„ ì¹´ë“œ(í„ìŠ¤) + ë¹„êµì˜ì—­ ìˆ¨ê¹€(ì•ˆì •ì : display:none)
function showResult(){
  // âœ… ê²°ê³¼ í˜ì´ì§€ì—ì„œ ë¹„êµ(ì„ íƒ) ì˜ì—­ ìˆ¨ê¸°ê¸°
  var cw = document.getElementById("compareWrap");
  if (cw) cw.style.display = "none";

  var ranking = 1;
  var sameRank = 1;
  var str = "";
  var i;

  // 1ìœ„ ì¹´ë“œ
  var topIdx = lstMember[0][0];
  var topName = namMember[topIdx];

  var card =
    "<div id='topCard'>" +
      "<div class='badge'>ğŸ† 1ìœ„</div>" +
      "<div class='song'>" + topName + "</div>" +
    "</div>";

  var tc = document.getElementById("topCardWrap");
  if (tc) tc.innerHTML = card;

  // ê²°ê³¼ í…Œì´ë¸”
  str += "<table id='resultTable'>";
  str += "<tr><th>ìˆœìœ„</th><th>ì´ë¦„</th></tr>";

  for (i=0; i<namMember.length; i++) {
    str += "<tr><td class='rankCell'>" + ranking + "</td><td class='nameCell'>" +
           namMember[lstMember[0][i]] + "</td></tr>";

    if (i < namMember.length - 1) {
      if (equal[lstMember[0][i]] == lstMember[0][i+1]) {
        sameRank++;
      } else {
        ranking += sameRank;
        sameRank = 1;
      }
    }
  }
  str += "</table>";

  var rf = document.getElementById("resultField");
  if (rf) rf.innerHTML = str;
}

// ë¹„êµ í™”ë©´ í‘œì‹œ
function showImage(){
  var leftStr = namMember[lstMember[cmp1][head1]];
  var rightStr = namMember[lstMember[cmp2][head2]];

  document.getElementById("leftField").innerHTML = leftStr;
  document.getElementById("rightField").innerHTML = rightStr;
}

// ë‹¤ì‹œí•˜ê¸°
function resetSort(){
  initList();
  showImage();
}
</script>

<style type="text/css">
/* ì „ì²´ í…Œë§ˆ */
body{
  background-color:#030303;
  color:#00e1ff;
  font-family:'êµ´ë¦¼', Gulim, sans-serif;
  margin: 0;
  padding: 0;
}

/* ê°€ìš´ë° ì •ë ¬ìš© ë˜í¼ */
#wrap{
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 10px 0 24px 0;
}

/* ìƒë‹¨ íƒ€ì´í‹€/ì§„í–‰ë„ */
#battleNumber{
  text-align:center;
  padding: 14px 0 8px 0;
}
#title{
  font-size: 22px;
  font-weight: bold;
  margin-bottom: 6px;
}
#progress{
  font-size: 15px;
  opacity: 0.9;
}

/* ë¹„êµ ì˜ì—­(ì„ íƒ í™”ë©´) */
#mainTable{
  width: 420px;
  margin: 0 auto;
  border-collapse: separate;
  border-spacing: 14px 10px;
}

/* tdëŠ” table-cell ìœ ì§€(ì„¸ë¡œë¡œ ë‚´ë ¤ì˜¤ëŠ” í˜„ìƒ ë°©ì§€) */
.choiceCell{
  padding: 0;
}

/* ì‹¤ì œ ì„ íƒ ë°•ìŠ¤ëŠ” divì— flex ì ìš© (ì„¸ë¡œ/ê°€ë¡œ ì¤‘ì•™ ì •í™•) */
.choiceBox{
  width: 200px;
  height: 240px;

  display: flex;
  align-items: center;
  justify-content: center;

  border: 1.5px solid #00e1ff;
  background-color: #030303;
  cursor: pointer;

  font-size: 18px;
  line-height: 1.3;
  text-align: center;

  transition: all 0.15s ease-in-out;

  -webkit-tap-highlight-color: rgba(0,0,0,0);
  touch-action: manipulation;
}

/* hover */
.choiceBox:hover{
  background-color: #050505;
  box-shadow: 0 0 8px #00e1ff, 0 0 16px rgba(0, 225, 255, 0.6);
}

/* click */
.choiceBox:active{
  transform: scale(0.95);
  box-shadow: 0 0 6px #00e1ff;
}

/* 1ìœ„ ì¹´ë“œ */
#topCard{
  width: 420px;
  margin: 14px auto 12px auto;
  padding: 14px 16px;
  border: 2px solid #00e1ff;
  background-color: #030303;
  border-radius: 12px;
  animation: neonPulse 2.2s ease-in-out infinite;
}

#topCard .badge{
  font-size: 13px;
  font-weight: bold;
  opacity: 0.9;
  margin-bottom: 6px;
}

#topCard .song{
  font-size: 22px;
  font-weight: bold;
  line-height: 1.25;
}

/* ì€ì€í•œ í„ìŠ¤ */
@keyframes neonPulse {
  0%   { box-shadow: 0 0 10px rgba(0,225,255,0.45); }
  50%  { box-shadow: 0 0 18px rgba(0,225,255,0.75); }
  100% { box-shadow: 0 0 10px rgba(0,225,255,0.45); }
}

/* ê²°ê³¼ í…Œì´ë¸” */
#resultTable{
  margin: 0 auto;
  border-collapse: collapse;
  font-size: 15px;
  min-width: 340px;
}
#resultTable th, #resultTable td{
  border: 1.5px solid #00e1ff;
  padding: 8px 10px;
}
.rankCell{
  text-align: right;
  width: 60px;
}
.nameCell{
  text-align: left;
}

/* ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼ */
#resetBtn{
  margin: 12px auto 0 auto;
  padding: 10px 14px;
  border: 1.5px solid #00e1ff;
  background: #030303;
  color: #00e1ff;
  font-family:'êµ´ë¦¼', Gulim, sans-serif;
  font-size: 14px;
  cursor: pointer;
  border-radius: 10px;
  transition: all 0.15s ease-in-out;
}
#resetBtn:hover{
  background-color: #050505;
  box-shadow: 0 0 8px rgba(0,225,255,0.55);
}
#resetBtn:active{
  transform: scale(0.97);
}

/* ëª¨ë°”ì¼ ìµœì í™” */
@media (max-width: 480px){
  #mainTable{ width: 380px; }
  .choiceBox{
    width: 180px;
    height: 260px;
    font-size: 19px;
  }
  #topCard{ width: 92%; }
  #title{ font-size: 24px; }
  #progress{ font-size: 16px; }
  #resultTable{ font-size: 16px; }
}
</style>
</head>

<body>
<div id="wrap">

  <!-- âœ… ë¹„êµ(ì„ íƒ) ì˜ì—­: ê²°ê³¼ì—ì„œ display:none ì²˜ë¦¬(ì•ˆì •ì ) -->
  <div id="compareWrap">
    <table id="mainTable" align="center">
      <tr>
        <td id="battleNumber" colspan="2">
          <div id="title">ë‹¹ì‹ ì˜ ìµœì•  IDID ë…¸ë˜ëŠ”?</div>
          <div id="progress">ì§„í–‰ë„ 0%</div>
        </td>
      </tr>
      <tr>
        <td class="choiceCell" onclick="choose(-1);">
          <div id="leftField" class="choiceBox">&nbsp;</div>
        </td>
        <td class="choiceCell" onclick="choose(1);">
          <div id="rightField" class="choiceBox">&nbsp;</div>
        </td>
      </tr>
    </table>
  </div>

  <!-- 1ìœ„ ì¹´ë“œ / ê²°ê³¼ -->
  <div id="topCardWrap" style="text-align:center;"></div>
  <div id="resultField" style="text-align:center;"></div>

  <!-- ë‹¤ì‹œí•˜ê¸° -->
  <button id="resetBtn" type="button" onclick="resetSort();">ë‹¤ì‹œí•˜ê¸°</button>

</div>

<script type="text/javascript">
initList();
showImage();
</script>

</body>
</html>
